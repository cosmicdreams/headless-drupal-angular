<link rel="import" href="../bower_components/core-ajax/core-ajax.html">
<polymer-element name="drupal-node" attributes="nid">
    <template>
        <core-ajax url="{{base_url}}/node/{{id}}"
                   headers='{"Accept":"application/hal+json"}'
                   handleAs="json"
                   on-core-response="{{handleResponse}}"
                   auto
                >
        </core-ajax>
        <h1>{{title}}</h1>

        <div class="node-content" >
            {{body}}
        </div>
    </template>
    <script>
        Polymer('drupal-node', {
            /**
             * Establish fields / default values
             */

            nid: 1,
            publish: {
                base_url: "http://dev-headless-drupal-8.gotpantheon.com",
                title: "Wait for it...",
                body: "Wait for it..."
            },
            handleResponse: function (event, response) {
                console.log(response);
                this.title = response.response.title[0].value;
                this.body = response.response.body[0].value;
            }
        });
    </script>
</polymer-element>